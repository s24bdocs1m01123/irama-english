{#
| Variable         | Type    | Description                     |
|------------------|---------|---------------------------------|
| cart             | object  |                                 |
| cart.items_count | int     |                                 |
| cart.total       | string  | Formatted total ex: "١٠٠ ر.س"   |
#}
<header class="store-header">
    {# Top Nav #}
    <div class="top-navbar">
        <div class="container flex justify-between">
            <div class="flex-1 flex items-center rtl:space-x-reverse space-x-2">
              {# Footer Menu #}
              {% component 'footer.menu' with {is_header:true} %}

                <div class="header-buttons">
                    {# Language & Currency Component #}
                    {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
                        <button type="button" onclick="salla.event.dispatch('localization::open')" class="btn--rounded-gray basis-0">
                            <span class="flag iti__flag iti__{{ user.language.country_code }} rounded-sm"></span>
                            <span class="mx-1.5">|</span> <span>{{ currency.symbol }}</span>
                        </button>
                        <salla-localization-modal></salla-localization-modal>
                    {% endif %}
                </div>

                {# Scopes | Branches #}
                {% if store.scope %}
                    <button class="btn--rounded-gray"
                            onclick="salla.event.dispatch('scopes::open', {'mode': 'default'})">
                        <i class="sicon-location rtl:ml-1 ltr:mr-1"></i> {{ store.scope.name }}
                    </button>
                {% endif %}

                {# Search Component #}
                {# <button onclick="salla.event.dispatch('search::open')" class="btn--circle-gray search-btn">
                <span class="sicon-search"></span>
                <span class="sm:hidden px-2 opacity-50">{{ trans('blocks.header.searchProducts') }}</span>
              </button> #}
              <div class="header-search flex-1">
                <salla-search inline oval height="36"></salla-search>
              </div>
            </div>

            {% component 'footer.contacts' with {is_header:true} %}
        </div>
    </div>

    {# Main Nav #}
    <div id="mainnav" class="main-nav-container shadow-default bg-white">
        <div class="inner bg-inherit">
            <div class="container">
                <div class="flex items-stretch justify-between relative">
                    <div class="flex items-center">
                        <a class="lg:hidden mburger mburger--collapse leading-none" href="#mobile-menu">
                            <i class="sicon-menu text-primary text-2xl rtl:ml-2.5 ltr:mr-2.5"></i>
                        </a>
                        <a class="navbar-brand" href="{{ store.url }}">
                            <img fetchpriority="high" width="100%" height="100%" loading="eager" src="{{ store.logo }}" alt="{{ store.name }}">
                            {% if is_page('index') %}
                              <h1 class="sr-only">{{ store.name }}</h1>
                            {% else %}
                              <h2 class="sr-only">{{ store.name }}</h2>
                            {% endif %}
                        </a>
                        
                        {# Custom Navigation Menu #}
                        <nav class="hidden lg:flex items-center ml-8 space-x-8 rtl:space-x-reverse">
                            <a href="{{ store.url }}" class="nav-link text-gray-800 hover:text-green-600 transition-colors font-medium {{ is_page('index') ? 'text-green-600' : '' }}">
                                {{ trans('blocks.header.home') ?: 'Home' }}
                            </a>
                            <a href="{{ link('custom/about') }}" class="nav-link text-gray-800 hover:text-green-600 transition-colors font-medium {{ is_page('about') ? 'text-green-600' : '' }}">
                                About
                            </a>
                            <a href="{{ link('custom/services') }}" class="nav-link text-gray-800 hover:text-green-600 transition-colors font-medium {{ is_page('services') ? 'text-green-600' : '' }}">
                                Services
                            </a>
                            <a href="{{ link('custom/sustainability') }}" class="nav-link text-gray-800 hover:text-green-600 transition-colors font-medium {{ is_page('sustainability') ? 'text-green-600' : '' }}">
                                Sustainability
                            </a>
                            <a href="{{ link('custom/contact') }}" class="nav-link text-gray-800 hover:text-green-600 transition-colors font-medium {{ is_page('contact') ? 'text-green-600' : '' }}">
                                Contact
                            </a>
                            
                            {# Salla Menu for additional pages #}
                            <div class="flex items-center">
                                <salla-menu source="main" class="flex items-center space-x-6 rtl:space-x-reverse"></salla-menu>
                            </div>
                        </nav>
                    </div>
                    <div class="flex items-center justify-end">
                        {% if user.type=='user' %}
                          <salla-user-menu avatar-only show-header></salla-user-menu>
                        {% else %}
                            <button class="header-btn" onclick="salla.event.dispatch('login::open')">
                              <i class="header-btn__icon sicon-user-circle"></i>
                            </button>
                        {% endif %}
                        <salla-cart-summary class="ml-4 rtl:ml-[unset] rtl:mr-4">
                          <i slot="icon" class="header-btn__icon icon sicon-shopping-bag"></i>
                        </salla-cart-summary>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

{# Mobile Menu #}
<div id="mobile-menu" class="mobile-menu lg:hidden fixed inset-0 z-50 bg-black bg-opacity-50 hidden">
    <div class="mobile-menu-content bg-white w-80 h-full overflow-y-auto">
        <div class="p-4 border-b border-gray-200">
            <div class="flex items-center justify-between">
                <img src="{{ store.logo }}" alt="{{ store.name }}" class="h-8">
                <button class="mobile-menu-close text-gray-500 hover:text-gray-700">
                    <i class="sicon-close text-xl"></i>
                </button>
            </div>
        </div>
        
        <nav class="p-4">
            <div class="space-y-4">
                <a href="{{ store.url }}" class="mobile-nav-link flex items-center py-3 px-4 text-gray-800 hover:bg-green-50 hover:text-green-600 rounded-lg transition-colors {{ is_page('index') ? 'bg-green-50 text-green-600' : '' }}">
                    <i class="sicon-home text-lg mr-3 rtl:mr-0 rtl:ml-3"></i>
                    {{ trans('blocks.header.home') ?: 'Home' }}
                </a>
                <a href="{{ link('custom/about') }}" class="mobile-nav-link flex items-center py-3 px-4 text-gray-800 hover:bg-green-50 hover:text-green-600 rounded-lg transition-colors {{ is_page('about') ? 'bg-green-50 text-green-600' : '' }}">
                    <i class="sicon-user text-lg mr-3 rtl:mr-0 rtl:ml-3"></i>
                    About
                </a>
                <a href="{{ link('custom/services') }}" class="mobile-nav-link flex items-center py-3 px-4 text-gray-800 hover:bg-green-50 hover:text-green-600 rounded-lg transition-colors {{ is_page('services') ? 'bg-green-50 text-green-600' : '' }}">
                    <i class="sicon-settings text-lg mr-3 rtl:mr-0 rtl:ml-3"></i>
                    Services
                </a>
                <a href="{{ link('custom/sustainability') }}" class="mobile-nav-link flex items-center py-3 px-4 text-gray-800 hover:bg-green-50 hover:text-green-600 rounded-lg transition-colors {{ is_page('sustainability') ? 'bg-green-50 text-green-600' : '' }}">
                    <i class="sicon-leaf text-lg mr-3 rtl:mr-0 rtl:ml-3"></i>
                    Sustainability
                </a>
                <a href="{{ link('custom/contact') }}" class="mobile-nav-link flex items-center py-3 px-4 text-gray-800 hover:bg-green-50 hover:text-green-600 rounded-lg transition-colors {{ is_page('contact') ? 'bg-green-50 text-green-600' : '' }}">
                    <i class="sicon-phone text-lg mr-3 rtl:mr-0 rtl:ml-3"></i>
                    Contact
                </a>
            </div>
            
            {# Additional Salla Menu Items #}
            <div class="mt-6 pt-6 border-t border-gray-200">
                <salla-menu source="main" class="mobile-salla-menu"></salla-menu>
            </div>
        </nav>
    </div>
</div>

{% if store.scope %}
    <salla-scopes selection="{{ store.scope.display_as == 'popup' ? 'mandatory' : 'optional' }}"></salla-scopes>
{% endif %}